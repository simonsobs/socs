version: '3.2'
services:
  # --------------------------------------------------------------------------
  # The socs library.
  # --------------------------------------------------------------------------
  socs:
    image: "socs"
    build: .

  # --------------------------------------------------------------------------
  # SOCS Agents
  # --------------------------------------------------------------------------

  # --------------------------------------------------------------------------
  # The Pysmurf Controller Agent
  # --------------------------------------------------------------------------
  ocs-pysmurf-agent:
    image: "ocs-pysmurf-agent"
    build: ./docker/pysmurf_controller/

  # --------------------------------------------------------------------------
  # The Pysmurf Monitor Agent
  # --------------------------------------------------------------------------
  ocs-pysmurf-monitor-agent:
    image: "ocs-pysmurf-monitor-agent"
    build: ./agents/pysmurf_monitor/
    depends_on:
      - "socs"

  # --------------------------------------------------------------------------
  # CHWP picoscope agent
  # --------------------------------------------------------------------------
  # Only works with --privileged, will insist users build image themselves
  # ocs-hwp-picoscope-agent:
  #   image: "ocs-hwp-picoscope-agent"
  #   build: ./docker/hwp_picoscope/
  #   depends_on:
  #     - "socs"

  # --------------------------------------------------------------------------
  # Wiregrid actuator agent
  # --------------------------------------------------------------------------
  ocs-wgactuator-agent:
    image: "ocs-wgactuator-agent"
    build: ./docker/wiregrid_actuator/
    depends_on:
      - "socs"

  # --------------------------------------------------------------------------
  # SOCS Simulators
  # --------------------------------------------------------------------------

  # --------------------------------------------------------------------------
  # Lakeshore240 Simulator
  # --------------------------------------------------------------------------
  ocs-lakeshore240-simulator:
    image: "ocs-lakeshore240-simulator"
    build: ./simulators/lakeshore240/
    depends_on:
      - "socs"

  ocs-lakeshore372-simulator:
    image: "ocs-lakeshore372-simulator"
    build: ./simulators/lakeshore372/
    depends_on:
      - "socs"
